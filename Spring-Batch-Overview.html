<!DOCTYPE html><html><head><meta http-equiv="Content-Type" content="text/html; charset=utf-8"><title>Spring Batch Overview</title><style>
      * {
        font-family: Georgia, Cambria, "Times New Roman", Times, serif;
      }
      html, body {
        margin: 0;
        padding: 0;
      }
      h1 {
        font-size: 50px;
        margin-bottom: 17px;
        color: #333;
      }
      h2 {
        font-size: 24px;
        line-height: 1.6;
        margin: 30px 0 0 0;
        margin-bottom: 18px;
        margin-top: 33px;
        color: #333;
      }
      h3 {
        font-size: 30px;
        margin: 10px 0 20px 0;
        color: #333;
      }
      header {
        width: 640px;
        margin: auto;
      }
      section {
        width: 640px;
        margin: auto;
      }
      section p {
        margin-bottom: 27px;
        font-size: 20px;
        line-height: 1.6;
        color: #333;
      }
      section img {
        max-width: 640px;
      }
      footer {
        padding: 0 20px;
        margin: 50px 0;
        text-align: center;
        font-size: 12px;
      }
      .aspectRatioPlaceholder {
        max-width: auto !important;
        max-height: auto !important;
      }
      .aspectRatioPlaceholder-fill {
        padding-bottom: 0 !important;
      }
      header,
      section[data-field=subtitle],
      section[data-field=description] {
        display: none;
      }
      </style></head><body><article class="h-entry">
<header>
<h1 class="p-name">Spring Batch Overview</h1>
</header>
<section data-field="subtitle" class="p-summary">
Spring batch is a framework that allows us to create reusable functions to process huge amounts of data for daily operations. This includes…
</section>
<section data-field="body" class="e-content">
<section name="7e01" class="section section--body section--first"><div class="section-divider"><hr class="section-divider"></div><div class="section-content"><div class="section-inner sectionLayout--insetColumn"><h3 name="4da9" id="4da9" class="graf graf--h3 graf--leading graf--title">Spring Batch Overview</h3><figure name="94c5" id="94c5" class="graf graf--figure graf-after--h3"><img class="graf-image" data-image-id="0*bmSo0iOqyUNt-rEF" data-width="4640" data-height="5672" data-unsplash-photo-id="51kUxCNcwpY" data-is-featured="true" src="https://cdn-images-1.medium.com/max/800/0*bmSo0iOqyUNt-rEF"><figcaption class="imageCaption">Photo by <a href="https://unsplash.com/@jccards?utm_source=medium&amp;utm_medium=referral" data-href="https://unsplash.com/@jccards?utm_source=medium&amp;utm_medium=referral" class="markup--anchor markup--figure-anchor" rel="photo-creator noopener" target="_blank">Marek Studzinski</a> on <a href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" data-href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" class="markup--anchor markup--figure-anchor" rel="photo-source noopener" target="_blank">Unsplash</a></figcaption></figure><p name="5253" id="5253" class="graf graf--p graf--hasDropCapModel graf--hasDropCap graf-after--figure"><span class="graf-dropCap">S</span>pring batch is a framework that allows us to create reusable functions to process huge amounts of data for daily operations. This includes transaction management, logging, resource management, etc.</p><h3 name="4f80" id="4f80" class="graf graf--h3 graf-after--p">Features</h3><ul class="postList"><li name="1001" id="1001" class="graf graf--li graf-after--h3">Transaction management</li><li name="09f0" id="09f0" class="graf graf--li graf-after--li">Chunk based processing</li><li name="a4a6" id="a4a6" class="graf graf--li graf-after--li">Declarative I/O</li><li name="08d0" id="08d0" class="graf graf--li graf-after--li">Start/Stop/Restart</li><li name="a0d4" id="a0d4" class="graf graf--li graf-after--li">Retry/Skip</li><li name="b792" id="b792" class="graf graf--li graf-after--li graf--trailing">Web-based administration interface (<a href="https://cloud.spring.io/spring-cloud-dataflow" data-href="https://cloud.spring.io/spring-cloud-dataflow" class="markup--anchor markup--li-anchor" rel="noopener" target="_blank">Spring Cloud Data Flow</a>)</li></ul></div></div></section><section name="c4f9" class="section section--body"><div class="section-divider"><hr class="section-divider"></div><div class="section-content"><div class="section-inner sectionLayout--insetColumn"><p name="bc14" id="bc14" class="graf graf--p graf--leading"><strong class="markup--strong markup--p-strong">The common Terminologies:</strong></p><ul class="postList"><li name="eaf7" id="eaf7" class="graf graf--li graf-after--p"><strong class="markup--strong markup--li-strong"><em class="markup--em markup--li-em">Job Repository</em></strong><em class="markup--em markup--li-em"> </em>: An infrastructure component that persists job execution metadata</li><li name="ddee" id="ddee" class="graf graf--li graf-after--li"><strong class="markup--strong markup--li-strong"><em class="markup--em markup--li-em">Job Launcher :</em> </strong>An infrastructure component that starts job executions</li><li name="db91" id="db91" class="graf graf--li graf-after--li"><strong class="markup--strong markup--li-strong"><em class="markup--em markup--li-em">Job</em></strong><em class="markup--em markup--li-em"> : </em>An application component that represents a batch process. It is a combination of a series of steps to achieve a task.</li><li name="0fb4" id="0fb4" class="graf graf--li graf-after--li"><strong class="markup--strong markup--li-strong"><em class="markup--em markup--li-em">Item</em></strong><em class="markup--em markup--li-em"> :</em> A record read from or written to a data source</li><li name="2818" id="2818" class="graf graf--li graf-after--li"><strong class="markup--strong markup--li-strong"><em class="markup--em markup--li-em">Chunk</em></strong><em class="markup--em markup--li-em"> : </em>A list of items of a given size</li><li name="f10b" id="f10b" class="graf graf--li graf-after--li"><strong class="markup--strong markup--li-strong"><em class="markup--em markup--li-em">Step :</em></strong> An individual component in a job. It can either have a reader, processor, and writer (or) a single task called <em class="markup--em markup--li-em">Tasklet</em>.</li><li name="c79a" id="c79a" class="graf graf--li graf-after--li"><strong class="markup--strong markup--li-strong"><em class="markup--em markup--li-em">Reader</em></strong><em class="markup--em markup--li-em"> :</em> Responsible for reading data from files/ database</li><li name="f232" id="f232" class="graf graf--li graf-after--li"><strong class="markup--strong markup--li-strong"><em class="markup--em markup--li-em">Processor :</em> </strong>A component responsible for processing (transforming, validating, or filtering) called after reader</li><li name="d51a" id="d51a" class="graf graf--li graf-after--li"><strong class="markup--strong markup--li-strong"><em class="markup--em markup--li-em">Writer : </em></strong>Called after the processor. It writes the data either to the console, file, or database.</li></ul><p name="7b07" id="7b07" class="graf graf--p graf-after--li">We can visualize it as below:</p><figure name="7a19" id="7a19" class="graf graf--figure graf-after--p graf--trailing"><img class="graf-image" data-image-id="0*KwB2SVIHA-WhjJ1_.png" data-width="1200" data-height="676" src="https://cdn-images-1.medium.com/max/800/0*KwB2SVIHA-WhjJ1_.png"><figcaption class="imageCaption">Photo from YouTube by <a href="https://www.youtube.com/@RehabMohamedAbdElhamid" data-href="https://www.youtube.com/@RehabMohamedAbdElhamid" class="markup--anchor markup--figure-anchor" rel="noopener" target="_blank">Rehab Academy For Programming</a></figcaption></figure></div></div></section><section name="7f34" class="section section--body"><div class="section-divider"><hr class="section-divider"></div><div class="section-content"><div class="section-inner sectionLayout--insetColumn"><p name="a9e6" id="a9e6" class="graf graf--p graf--leading">To illustrate its working, let&#39;s create a job that will include 2 steps.</p><ol class="postList"><li name="38f6" id="38f6" class="graf graf--li graf-after--p">A Tasklet to sort the input file content and write to another file</li><li name="3efd" id="3efd" class="graf graf--li graf-after--li">chunk-based step to read the file from the first step, process its data, and finally write to a JSON file.</li></ol><p name="876e" id="876e" class="graf graf--p graf-after--li">To start with, we need the below dependency in <code class="markup--code markup--p-code">pom.xml</code></p><pre data-code-block-mode="1" spellcheck="false" data-code-block-lang="xml" name="4295" id="4295" class="graf graf--pre graf-after--p graf--trailing graf--preV2"><span class="pre--content">  <span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span><br />   <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>org.springframework.boot<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span><br />   <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>spring-boot-starter-batch<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span><br />  <span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span></span></pre></div></div></section><section name="e716" class="section section--body"><div class="section-divider"><hr class="section-divider"></div><div class="section-content"><div class="section-inner sectionLayout--insetColumn"><p name="36be" id="36be" class="graf graf--p graf--leading">Annotate the configuration class with <code class="markup--code markup--p-code">@EnableBatchProcessing</code>to enable batch processing in your application. Invoke the Job using JobLauncher providing JobParameters, if any.</p><pre data-code-block-mode="1" spellcheck="false" data-code-block-lang="java" name="f2c4" id="f2c4" class="graf graf--pre graf-after--p graf--preV2"><span class="pre--content"><span class="hljs-keyword">package</span> com.example.springbatchplayground;<br /><br /><span class="hljs-keyword">import</span> org.springframework.batch.core.Job;<br /><span class="hljs-keyword">import</span> org.springframework.batch.core.JobExecution;<br /><span class="hljs-keyword">import</span> org.springframework.batch.core.JobParameters;<br /><span class="hljs-keyword">import</span> org.springframework.batch.core.configuration.annotation.EnableBatchProcessing;<br /><span class="hljs-keyword">import</span> org.springframework.batch.core.launch.JobLauncher;<br /><span class="hljs-keyword">import</span> org.springframework.boot.SpringApplication;<br /><span class="hljs-keyword">import</span> org.springframework.boot.autoconfigure.SpringBootApplication;<br /><span class="hljs-keyword">import</span> org.springframework.boot.autoconfigure.jdbc.DataSourceAutoConfiguration;<br /><span class="hljs-keyword">import</span> org.springframework.context.ConfigurableApplicationContext;<br /><span class="hljs-keyword">import</span> java.io.IOException;<br /><br /><span class="hljs-meta">@SpringBootApplication(exclude = {DataSourceAutoConfiguration.class })</span><br /><span class="hljs-meta">@EnableBatchProcessing</span><br /><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">SpringBatchPlaygroundApplication</span> {<br /><br /> <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> <span class="hljs-keyword">throws</span> IOException {<br />  <span class="hljs-type">ConfigurableApplicationContext</span> <span class="hljs-variable">context</span> <span class="hljs-operator">=</span> SpringApplication.run(SpringBatchPlaygroundApplication.class, args);<br />  <span class="hljs-type">JobLauncher</span> <span class="hljs-variable">jobLauncher</span> <span class="hljs-operator">=</span> (JobLauncher) context.getBean(<span class="hljs-string">&quot;jobLauncher&quot;</span>);<br />  <span class="hljs-type">Job</span> <span class="hljs-variable">job</span> <span class="hljs-operator">=</span> (Job) context.getBean(<span class="hljs-string">&quot;firstBatchJob&quot;</span>);<br />  System.out.println(<span class="hljs-string">&quot;Starting the batch job&quot;</span>);<br />  <span class="hljs-keyword">try</span> {<br />   <span class="hljs-type">JobExecution</span> <span class="hljs-variable">execution</span> <span class="hljs-operator">=</span> jobLauncher.run(job, context.getBean(JobParameters.class));<br />   System.out.println(<span class="hljs-string">&quot;Job Status : &quot;</span> + execution.getStatus());<br />   System.out.println(<span class="hljs-string">&quot;Job completed&quot;</span>);<br />  } <span class="hljs-keyword">catch</span> (Exception e) {<br />   e.printStackTrace();<br />   System.out.println(<span class="hljs-string">&quot;Job failed&quot;</span>);<br />  }<br /> }<br /><br />}</span></pre><blockquote name="7ed8" id="7ed8" class="graf graf--blockquote graf-after--pre">Note: Since we are not connecting to any database, we are excluding the DataSourceAutoConfiguration</blockquote><p name="2efa" id="2efa" class="graf graf--p graf-after--blockquote">Create the beans of <code class="markup--code markup--p-code">JobLauncher</code> , <code class="markup--code markup--p-code">JobParameters</code> and a <code class="markup--code markup--p-code">Job</code> with 2 steps — Tasklet and chunkStep.</p><pre data-code-block-mode="2" spellcheck="false" data-code-block-lang="java" name="3f4a" id="3f4a" class="graf graf--pre graf-after--p graf--preV2"><span class="pre--content"><span class="hljs-meta">@Bean(name = &quot;jobLauncher&quot;)</span><br /><span class="hljs-keyword">public</span> JobLauncher <span class="hljs-title function_">getJobLauncher</span><span class="hljs-params">()</span> <span class="hljs-keyword">throws</span> Exception {<br />    <span class="hljs-type">SimpleJobLauncher</span> <span class="hljs-variable">jobLauncher</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">SimpleJobLauncher</span>();<br />    jobLauncher.afterPropertiesSet();<br />    <span class="hljs-keyword">return</span> jobLauncher;<br />}<br /><br /><span class="hljs-meta">@Bean(&quot;JobParameters&quot;)</span><br /><span class="hljs-keyword">public</span> JobParameters <span class="hljs-title function_">getJobParameters</span><span class="hljs-params">()</span> {<br />    <span class="hljs-type">JobParametersBuilder</span> <span class="hljs-variable">jobParametersBuilder</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">JobParametersBuilder</span>();<br />    jobParametersBuilder.addString(<span class="hljs-string">&quot;inputFileLocation&quot;</span>, <span class="hljs-string">&quot;inputCustomerList.json&quot;</span>);<br />    jobParametersBuilder.addString(<span class="hljs-string">&quot;sortedFileLocation&quot;</span>, <span class="hljs-string">&quot;src/main/resources/sortedCustomerList.json&quot;</span>);<br />    <span class="hljs-keyword">return</span> jobParametersBuilder.toJobParameters();<br />}<br /><br /><span class="hljs-meta">@Bean(&quot;firstBatchJob&quot;)</span><br /><span class="hljs-keyword">public</span> Job <span class="hljs-title function_">customerReportJob</span><span class="hljs-params">(<span class="hljs-meta">@Qualifier(&quot;TaskletStep&quot;)</span> Step taskletStep)</span> <span class="hljs-keyword">throws</span> Exception {<br />    <span class="hljs-keyword">return</span> jobBuilders.get(<span class="hljs-string">&quot;customerReportJob&quot;</span>)<br />            .start(taskletStep)<br />            .next(chunkStep())<br />            .build();<br />}</span></pre><p name="a932" id="a932" class="graf graf--p graf-after--pre">The POJO class called <code class="markup--code markup--p-code">Customer</code> to read from the input JSON file:</p><pre data-code-block-mode="2" spellcheck="false" data-code-block-lang="java" name="13ac" id="13ac" class="graf graf--pre graf-after--p graf--preV2"><span class="pre--content"><span class="hljs-keyword">package</span> com.example.springbatchplayground.model;<br /><br /><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">Customer</span> {<br /><br />    <span class="hljs-keyword">private</span> String Id;<br />    <span class="hljs-keyword">private</span> String name;<br />    <span class="hljs-keyword">private</span> String department;<br />    <span class="hljs-keyword">public</span> <span class="hljs-title function_">Customer</span><span class="hljs-params">()</span> {<br />    }<br />    <span class="hljs-keyword">public</span> <span class="hljs-title function_">Customer</span><span class="hljs-params">(String id, String name, String department)</span> {<br />        Id = id;<br />        <span class="hljs-built_in">this</span>.name = name;<br />        <span class="hljs-built_in">this</span>.department = department;<br />    }<br />    <span class="hljs-comment">// Getters and Setters</span><br />}</span></pre><p name="ac06" id="ac06" class="graf graf--p graf-after--pre">Tasklet:</p><pre data-code-block-mode="2" spellcheck="false" data-code-block-lang="java" name="9f98" id="9f98" class="graf graf--pre graf-after--p graf--preV2"><span class="pre--content"><span class="hljs-meta">@Bean(&quot;TaskletStep&quot;)</span><br /><span class="hljs-keyword">public</span> Step <span class="hljs-title function_">taskletStep</span><span class="hljs-params">(<span class="hljs-meta">@Qualifier(&quot;Tasklet&quot;)</span> Tasklet tasklet)</span> {<br />    <span class="hljs-keyword">return</span> stepBuilders.get(<span class="hljs-string">&quot;taskletStep&quot;</span>)<br />            .tasklet(tasklet)<br />            .build();<br />}<br /><br /><span class="hljs-meta">@Bean(&quot;Tasklet&quot;)</span><br /><span class="hljs-meta">@StepScope</span><br /><span class="hljs-keyword">public</span> Tasklet <span class="hljs-title function_">tasklet</span><span class="hljs-params">(<span class="hljs-meta">@Qualifier(&quot;JobParameters&quot;)</span> JobParameters jobParameters)</span> {<br />    <span class="hljs-keyword">return</span> (contribution, chunkContext) -&gt; {<br />        System.out.println(<span class="hljs-string">&quot;Starting tasklet step&quot;</span>);<br />        List&lt;Customer&gt; customers = Arrays.asList(<span class="hljs-keyword">new</span> <span class="hljs-title class_">ObjectMapper</span>().readValue(<span class="hljs-keyword">new</span> <span class="hljs-title class_">ClassPathResource</span>(jobParameters.getParameters().get(<span class="hljs-string">&quot;inputFileLocation&quot;</span>).toString()).getFile(), Customer[].class));<br />        Collections.sort(customers, Comparator.comparing(Customer::getId));<br />        <span class="hljs-type">File</span> <span class="hljs-variable">file</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">File</span>(jobParameters.getParameters().get(<span class="hljs-string">&quot;sortedFileLocation&quot;</span>).toString());<br />        <span class="hljs-keyword">if</span>(!file.exists()){<br />            System.out.println(<span class="hljs-string">&quot;FILE DOES NOT EXISTS. CREATED NOW&quot;</span>);<br />            file.createNewFile();<br />        }<br />        System.out.println(<span class="hljs-string">&quot;after sorting:&quot;</span>+customers);<br />        Files.writeString(Path.of(file.getPath()),<span class="hljs-keyword">new</span> <span class="hljs-title class_">ObjectMapper</span>().writer().withDefaultPrettyPrinter().writeValueAsString(customers));<br />        <span class="hljs-keyword">return</span> RepeatStatus.FINISHED;<br />    };<br />}</span></pre><p name="d14f" id="d14f" class="graf graf--p graf-after--pre">Here, we are reading the input file <code class="markup--code markup--p-code">inputCustomerList.json</code> , sorting using JAVA stream, and writing to a new file <code class="markup--code markup--p-code">sortedCustomerList.json</code>. We return <code class="markup--code markup--p-code">RepeatStatus.FINISHED</code> to indicate the completed operation.</p><blockquote name="6c81" id="6c81" class="graf graf--blockquote graf-after--p">Note: <a href="https://docs.spring.io/spring-batch/docs/current/api/org/springframework/batch/core/configuration/annotation/StepScope.html" data-href="https://docs.spring.io/spring-batch/docs/current/api/org/springframework/batch/core/configuration/annotation/StepScope.html" class="markup--anchor markup--blockquote-anchor" rel="noopener" target="_blank">@StepScope</a> is used on any bean that needs to share a lifecycle with a step execution</blockquote><p name="671d" id="671d" class="graf graf--p graf-after--blockquote">The Chunk step (reader, writer, and processor) :</p><pre data-code-block-mode="2" spellcheck="false" data-code-block-lang="java" name="bbae" id="bbae" class="graf graf--pre graf-after--p graf--preV2"><span class="pre--content">    <span class="hljs-meta">@Bean</span><br />    <span class="hljs-keyword">public</span> Step <span class="hljs-title function_">chunkStep</span><span class="hljs-params">()</span> <span class="hljs-keyword">throws</span> Exception {<br />        <span class="hljs-keyword">return</span> stepBuilders.get(<span class="hljs-string">&quot;chunkStep&quot;</span>)<br />                .&lt;Customer, PremiumCustomer&gt;chunk(<span class="hljs-number">3</span>)<br />                .reader(reader())<br />                .processor(processor())<br />                .writer(writer())<br />                .stream(dupItemWriter())<span class="hljs-comment">// stream of writer to open it before writing to it</span><br />                .build();<br />    }<br /><br />    <span class="hljs-meta">@StepScope</span><br />    <span class="hljs-meta">@Bean</span><br />    <span class="hljs-keyword">public</span> ItemReader&lt;Customer&gt; <span class="hljs-title function_">reader</span><span class="hljs-params">()</span> <span class="hljs-keyword">throws</span> IOException {<br />        <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">CustomerItemReader</span>(<span class="hljs-string">&quot;src/main/resources/sortedCustomerList.json&quot;</span>);<br />    }<br /><br />    <span class="hljs-meta">@StepScope</span><br />    <span class="hljs-meta">@Bean</span><br />    <span class="hljs-keyword">public</span> ItemWriter&lt;PremiumCustomer&gt; <span class="hljs-title function_">writer</span><span class="hljs-params">()</span> <span class="hljs-keyword">throws</span> Exception {<br />        <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">CustomerItemWriter</span>();<br />    }<br /><br />    <span class="hljs-meta">@StepScope</span><br />    <span class="hljs-meta">@Bean</span><br />    <span class="hljs-keyword">public</span> ItemProcessor&lt;Customer, PremiumCustomer&gt; <span class="hljs-title function_">processor</span><span class="hljs-params">()</span> {<br />        <span class="hljs-keyword">final</span> CompositeItemProcessor&lt;Customer, PremiumCustomer&gt; processor = <span class="hljs-keyword">new</span> <span class="hljs-title class_">CompositeItemProcessor</span>&lt;&gt;();<br />        processor.setDelegates(Arrays.asList(<span class="hljs-keyword">new</span> <span class="hljs-title class_">CustomerItemProcessor</span>()));<br />        <span class="hljs-keyword">return</span> processor;<br />    }<br /><br />    <span class="hljs-meta">@Bean(name = &quot;duplicateItemWriter&quot;)</span><br />    <span class="hljs-keyword">public</span> JsonFileItemWriter&lt;PremiumCustomer&gt; <span class="hljs-title function_">dupItemWriter</span><span class="hljs-params">()</span>{<br />        <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">JsonFileItemWriterBuilder</span>&lt;PremiumCustomer&gt;()<br />                .name(<span class="hljs-string">&quot;duplicateItemWriter&quot;</span>)<br />                .resource(<span class="hljs-keyword">new</span> <span class="hljs-title class_">FileSystemResource</span>(<span class="hljs-string">&quot;src/main/resources/finalCustomerList.json&quot;</span>))<br />                .jsonObjectMarshaller(<span class="hljs-keyword">new</span> <span class="hljs-title class_">JacksonJsonObjectMarshaller</span>&lt;&gt;())<br />                .append(<span class="hljs-literal">false</span>)<br />                .shouldDeleteIfExists(<span class="hljs-literal">true</span>)<br />                .build();<br />    }</span></pre><p name="718e" id="718e" class="graf graf--p graf-after--pre">Here, we are creating a Step named <em class="markup--em markup--p-em">chunkStep</em> whose input type is <code class="markup--code markup--p-code">Customer</code> and output type is <code class="markup--code markup--p-code">PremiumCustomer</code> processing 3 records at a time.</p><p name="af72" id="af72" class="graf graf--p graf-after--p">For the reader, we need to implement the interface <a href="https://docs.spring.io/spring-batch/reference/readers-and-writers/item-reader.html" data-href="https://docs.spring.io/spring-batch/reference/readers-and-writers/item-reader.html" class="markup--anchor markup--p-anchor" rel="noopener" target="_blank"><strong class="markup--strong markup--p-strong">ItemReader&lt;T&gt;</strong></a> where <strong class="markup--strong markup--p-strong">T</strong> is the type of object to be read. Provide customized implementation for <code class="markup--code markup--p-code">read()</code> method.</p><pre data-code-block-mode="1" spellcheck="false" data-code-block-lang="java" name="ef4d" id="ef4d" class="graf graf--pre graf-after--p graf--preV2"><span class="pre--content"><span class="hljs-keyword">package</span> com.example.springbatchplayground.steps;<br /><br /><span class="hljs-keyword">import</span> com.example.springbatchplayground.model.Customer;<br /><span class="hljs-keyword">import</span> com.fasterxml.jackson.databind.ObjectMapper;<br /><span class="hljs-keyword">import</span> org.springframework.batch.core.configuration.annotation.StepScope;<br /><span class="hljs-keyword">import</span> org.springframework.batch.item.ItemReader;<br /><span class="hljs-keyword">import</span> org.springframework.batch.item.NonTransientResourceException;<br /><span class="hljs-keyword">import</span> org.springframework.batch.item.ParseException;<br /><span class="hljs-keyword">import</span> org.springframework.batch.item.UnexpectedInputException;<br /><span class="hljs-keyword">import</span> org.springframework.stereotype.Component;<br /><span class="hljs-keyword">import</span> java.io.File;<br /><span class="hljs-keyword">import</span> java.io.IOException;<br /><span class="hljs-keyword">import</span> java.util.Arrays;<br /><span class="hljs-keyword">import</span> java.util.List;<br /><br /><span class="hljs-meta">@Component</span><br /><span class="hljs-meta">@StepScope</span><br /><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">CustomerItemReader</span> <span class="hljs-keyword">implements</span> <span class="hljs-title class_">ItemReader</span>&lt;Customer&gt; {<br /><br />    <span class="hljs-keyword">private</span> <span class="hljs-keyword">final</span> String filename;<br /><br />    <span class="hljs-keyword">private</span> <span class="hljs-type">int</span> nextCustomerIndex;<br />    <span class="hljs-keyword">private</span> List&lt;Customer&gt; customers;<br /><br />    <span class="hljs-keyword">public</span> <span class="hljs-title function_">CustomerItemReader</span><span class="hljs-params">(<span class="hljs-keyword">final</span> String filename)</span> <span class="hljs-keyword">throws</span> IOException {<br />        <span class="hljs-built_in">this</span>.filename = filename;<br />        initialize();<br />    }<br /><br />    <span class="hljs-keyword">private</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">initialize</span><span class="hljs-params">()</span> <span class="hljs-keyword">throws</span> IOException {<br />        <span class="hljs-type">File</span> <span class="hljs-variable">newFile</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">File</span>(filename);<br />        <span class="hljs-keyword">if</span>(!newFile.exists()) {<br />            newFile.createNewFile();<br />        }<br />        customers = Arrays.asList(<span class="hljs-keyword">new</span> <span class="hljs-title class_">ObjectMapper</span>().readValue(newFile, Customer[].class));<br />        nextCustomerIndex = <span class="hljs-number">0</span>;<br />    }<br /><br />    <span class="hljs-meta">@Override</span><br />    <span class="hljs-keyword">public</span> Customer <span class="hljs-title function_">read</span><span class="hljs-params">()</span> <span class="hljs-keyword">throws</span> UnexpectedInputException, ParseException, NonTransientResourceException {<br />        <span class="hljs-type">Customer</span> <span class="hljs-variable">nextCustomer</span> <span class="hljs-operator">=</span> <span class="hljs-literal">null</span>;<br /><br />        <span class="hljs-keyword">if</span> (nextCustomerIndex &lt; customers.size()) {<br />            nextCustomer = (Customer) customers.get(nextCustomerIndex);<br />            nextCustomerIndex++;<br />        }<br />        <span class="hljs-keyword">else</span> {<br />            nextCustomerIndex = <span class="hljs-number">0</span>;<br />        }<br /><br />        <span class="hljs-keyword">return</span> nextCustomer;<br />    }<br />}</span></pre><p name="4d5c" id="4d5c" class="graf graf--p graf-after--pre">For the Writer, we need to implement the interface <a href="https://docs.spring.io/spring-batch/reference/readers-and-writers/item-writer.html" data-href="https://docs.spring.io/spring-batch/reference/readers-and-writers/item-writer.html" class="markup--anchor markup--p-anchor" rel="noopener" target="_blank"><strong class="markup--strong markup--p-strong">ItemWriter&lt;T&gt;</strong></a> where <strong class="markup--strong markup--p-strong">T</strong> is the object type to be written. Provide customized implementation for <code class="markup--code markup--p-code">write()</code> method.</p><pre data-code-block-mode="1" spellcheck="false" data-code-block-lang="java" name="a8ce" id="a8ce" class="graf graf--pre graf-after--p graf--preV2"><span class="pre--content"><span class="hljs-keyword">package</span> com.example.springbatchplayground.steps;<br /><br /><span class="hljs-keyword">import</span> com.example.springbatchplayground.model.PremiumCustomer;<br /><span class="hljs-keyword">import</span> org.springframework.batch.item.ItemWriter;<br /><span class="hljs-keyword">import</span> org.springframework.batch.item.json.JsonFileItemWriter;<br /><span class="hljs-keyword">import</span> org.springframework.beans.factory.annotation.Autowired;<br /><span class="hljs-keyword">import</span> org.springframework.stereotype.Component;<br /><span class="hljs-keyword">import</span> java.io.Closeable;<br /><span class="hljs-keyword">import</span> java.util.List;<br /><br /><span class="hljs-meta">@Component</span><br /><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">CustomerItemWriter</span> <span class="hljs-keyword">implements</span> <span class="hljs-title class_">ItemWriter</span>&lt;PremiumCustomer&gt;, Closeable {<br /><br />    <span class="hljs-meta">@Autowired</span><br />    JsonFileItemWriter&lt;PremiumCustomer&gt; writer;<br /><br /><br />    <span class="hljs-meta">@Override</span><br />    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">close</span><span class="hljs-params">()</span> {<br /><br />    }<br /><br />    <span class="hljs-meta">@Override</span><br />    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">write</span><span class="hljs-params">(List&lt;? extends PremiumCustomer&gt; list)</span> <span class="hljs-keyword">throws</span> Exception {<br />        System.out.println(<span class="hljs-string">&quot;writing final customer list:&quot;</span>+list);<br />        writer.write(list);<br />        System.out.println(<span class="hljs-string">&quot;writing to final file completed&quot;</span>);<br />    }<br />}</span></pre><p name="d532" id="d532" class="graf graf--p graf-after--pre">For the Processor, we need to implement the interface <a href="https://docs.spring.io/spring-batch/reference/processor.html" data-href="https://docs.spring.io/spring-batch/reference/processor.html" class="markup--anchor markup--p-anchor" rel="noopener" target="_blank"><strong class="markup--strong markup--p-strong">ItemProcessor&lt;I,O&gt;</strong></a> where <strong class="markup--strong markup--p-strong">I</strong> is the input type and <strong class="markup--strong markup--p-strong">O</strong> is the output type. Here, we are getting the Customer object and returning the PremiumCustomer object. Provide customized implementation for <code class="markup--code markup--p-code">process()</code> method.</p><pre data-code-block-mode="1" spellcheck="false" data-code-block-lang="java" name="5526" id="5526" class="graf graf--pre graf-after--p graf--trailing graf--preV2"><span class="pre--content"><span class="hljs-keyword">package</span> com.example.springbatchplayground.steps;<br /><br /><span class="hljs-keyword">import</span> com.example.springbatchplayground.model.Customer;<br /><span class="hljs-keyword">import</span> com.example.springbatchplayground.model.PremiumCustomer;<br /><span class="hljs-keyword">import</span> org.springframework.batch.item.ItemProcessor;<br /><span class="hljs-keyword">import</span> java.util.UUID;<br /><br /><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">CustomerItemProcessor</span> <span class="hljs-keyword">implements</span> <span class="hljs-title class_">ItemProcessor</span>&lt;Customer, PremiumCustomer&gt; {<br /><br />    <span class="hljs-meta">@Override</span><br />    <span class="hljs-keyword">public</span> PremiumCustomer <span class="hljs-title function_">process</span><span class="hljs-params">(Customer customer)</span> <span class="hljs-keyword">throws</span> Exception {<br />        <span class="hljs-comment">// process the customer</span><br />        <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">PremiumCustomer</span>(customer.getId(), UUID.randomUUID().toString(),<span class="hljs-string">&quot;PREMIUM_&quot;</span>+customer.getName(), <span class="hljs-string">&quot;VIP&quot;</span>);<br />    }<br />}</span></pre></div></div></section><section name="5663" class="section section--body section--last"><div class="section-divider"><hr class="section-divider"></div><div class="section-content"><div class="section-inner sectionLayout--insetColumn"><p name="8fca" id="8fca" class="graf graf--p graf--leading"><strong class="markup--strong markup--p-strong">Execution:</strong></p><p name="d3f3" id="d3f3" class="graf graf--p graf-after--p">For the below input file, inputCustomerList.json:</p><pre data-code-block-mode="1" spellcheck="false" data-code-block-lang="json" name="3835" id="3835" class="graf graf--pre graf-after--p graf--preV2"><span class="pre--content"><span class="hljs-punctuation">[</span> <span class="hljs-punctuation">{</span><br />  <span class="hljs-attr">&quot;name&quot;</span> <span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;Monica&quot;</span><span class="hljs-punctuation">,</span><br />  <span class="hljs-attr">&quot;department&quot;</span> <span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;IT&quot;</span><span class="hljs-punctuation">,</span><br />  <span class="hljs-attr">&quot;id&quot;</span> <span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;4&quot;</span><br /><span class="hljs-punctuation">}</span><span class="hljs-punctuation">,</span> <span class="hljs-punctuation">{</span><br />  <span class="hljs-attr">&quot;name&quot;</span> <span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;Joey&quot;</span><span class="hljs-punctuation">,</span><br />  <span class="hljs-attr">&quot;department&quot;</span> <span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;Sales&quot;</span><span class="hljs-punctuation">,</span><br />  <span class="hljs-attr">&quot;id&quot;</span> <span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;1&quot;</span><br /><span class="hljs-punctuation">}</span><span class="hljs-punctuation">,</span> <span class="hljs-punctuation">{</span><br />  <span class="hljs-attr">&quot;name&quot;</span> <span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;Rachel&quot;</span><span class="hljs-punctuation">,</span><br />  <span class="hljs-attr">&quot;department&quot;</span> <span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;IT&quot;</span><span class="hljs-punctuation">,</span><br />  <span class="hljs-attr">&quot;id&quot;</span> <span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;3&quot;</span><br /><span class="hljs-punctuation">}</span> <span class="hljs-punctuation">]</span></span></pre><p name="0b36" id="0b36" class="graf graf--p graf-after--pre">After running this job, it will create 2 files</p><p name="4ca7" id="4ca7" class="graf graf--p graf-after--p"><em class="markup--em markup--p-em">sortedCustomerList.json (by tasklet step):</em></p><pre data-code-block-mode="1" spellcheck="false" data-code-block-lang="json" name="bb37" id="bb37" class="graf graf--pre graf-after--p graf--preV2"><span class="pre--content"><span class="hljs-punctuation">[</span> <span class="hljs-punctuation">{</span><br />  <span class="hljs-attr">&quot;name&quot;</span> <span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;Joey&quot;</span><span class="hljs-punctuation">,</span><br />  <span class="hljs-attr">&quot;department&quot;</span> <span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;Sales&quot;</span><span class="hljs-punctuation">,</span><br />  <span class="hljs-attr">&quot;id&quot;</span> <span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;1&quot;</span><br /><span class="hljs-punctuation">}</span><span class="hljs-punctuation">,</span> <span class="hljs-punctuation">{</span><br />  <span class="hljs-attr">&quot;name&quot;</span> <span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;Rachel&quot;</span><span class="hljs-punctuation">,</span><br />  <span class="hljs-attr">&quot;department&quot;</span> <span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;IT&quot;</span><span class="hljs-punctuation">,</span><br />  <span class="hljs-attr">&quot;id&quot;</span> <span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;3&quot;</span><br /><span class="hljs-punctuation">}</span><span class="hljs-punctuation">,</span> <span class="hljs-punctuation">{</span><br />  <span class="hljs-attr">&quot;name&quot;</span> <span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;Monica&quot;</span><span class="hljs-punctuation">,</span><br />  <span class="hljs-attr">&quot;department&quot;</span> <span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;IT&quot;</span><span class="hljs-punctuation">,</span><br />  <span class="hljs-attr">&quot;id&quot;</span> <span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;4&quot;</span><br /><span class="hljs-punctuation">}</span> <span class="hljs-punctuation">]</span></span></pre><p name="35d4" id="35d4" class="graf graf--p graf-after--pre"><em class="markup--em markup--p-em">finalCustomerList.json (by chunk step):</em></p><pre data-code-block-mode="1" spellcheck="false" data-code-block-lang="json" name="0ab4" id="0ab4" class="graf graf--pre graf-after--p graf--preV2"><span class="pre--content"><span class="hljs-punctuation">[</span><br /> <span class="hljs-punctuation">{</span><span class="hljs-attr">&quot;premiumID&quot;</span><span class="hljs-punctuation">:</span><span class="hljs-string">&quot;7bc13113-3543-4bfa-9705-aa34502bba1d&quot;</span><span class="hljs-punctuation">,</span><span class="hljs-attr">&quot;name&quot;</span><span class="hljs-punctuation">:</span><span class="hljs-string">&quot;PREMIUM_Joey&quot;</span><span class="hljs-punctuation">,</span><span class="hljs-attr">&quot;subscribedPlan&quot;</span><span class="hljs-punctuation">:</span><span class="hljs-string">&quot;VIP&quot;</span><span class="hljs-punctuation">,</span><span class="hljs-attr">&quot;id&quot;</span><span class="hljs-punctuation">:</span><span class="hljs-string">&quot;1&quot;</span><span class="hljs-punctuation">}</span><span class="hljs-punctuation">,</span><br /> <span class="hljs-punctuation">{</span><span class="hljs-attr">&quot;premiumID&quot;</span><span class="hljs-punctuation">:</span><span class="hljs-string">&quot;f00f8964-45b5-42bc-86fc-478bba1f9101&quot;</span><span class="hljs-punctuation">,</span><span class="hljs-attr">&quot;name&quot;</span><span class="hljs-punctuation">:</span><span class="hljs-string">&quot;PREMIUM_Rachel&quot;</span><span class="hljs-punctuation">,</span><span class="hljs-attr">&quot;subscribedPlan&quot;</span><span class="hljs-punctuation">:</span><span class="hljs-string">&quot;VIP&quot;</span><span class="hljs-punctuation">,</span><span class="hljs-attr">&quot;id&quot;</span><span class="hljs-punctuation">:</span><span class="hljs-string">&quot;3&quot;</span><span class="hljs-punctuation">}</span><span class="hljs-punctuation">,</span><br /> <span class="hljs-punctuation">{</span><span class="hljs-attr">&quot;premiumID&quot;</span><span class="hljs-punctuation">:</span><span class="hljs-string">&quot;bdaec947-2501-4447-af83-9fc422fe0dbd&quot;</span><span class="hljs-punctuation">,</span><span class="hljs-attr">&quot;name&quot;</span><span class="hljs-punctuation">:</span><span class="hljs-string">&quot;PREMIUM_Monica&quot;</span><span class="hljs-punctuation">,</span><span class="hljs-attr">&quot;subscribedPlan&quot;</span><span class="hljs-punctuation">:</span><span class="hljs-string">&quot;VIP&quot;</span><span class="hljs-punctuation">,</span><span class="hljs-attr">&quot;id&quot;</span><span class="hljs-punctuation">:</span><span class="hljs-string">&quot;4&quot;</span><span class="hljs-punctuation">}</span><br /><span class="hljs-punctuation">]</span></span></pre><p name="c878" id="c878" class="graf graf--p graf-after--pre">The complete code is available <a href="https://github.com/oldfr/spring-batch-overview" data-href="https://github.com/oldfr/spring-batch-overview" class="markup--anchor markup--p-anchor" rel="noopener" target="_blank">here</a>.</p><p name="c7b8" id="c7b8" class="graf graf--p graf-after--p graf--trailing">Thank you for reading. Happy exploring!!!</p></div></div></section>
</section>
<footer><p>By <a href="https://medium.com/@ankithahjpgowda" class="p-author h-card">Ankitha Gowda</a> on <a href="https://medium.com/p/ae780f6855d2"><time class="dt-published" datetime="2024-04-21T16:10:47.222Z">April 21, 2024</time></a>.</p><p><a href="https://medium.com/@ankithahjpgowda/spring-batch-overview-ae780f6855d2" class="p-canonical">Canonical link</a></p><p>Exported from <a href="https://medium.com">Medium</a> on November 9, 2025.</p></footer></article></body></html>