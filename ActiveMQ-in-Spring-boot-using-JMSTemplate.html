<!DOCTYPE html><html><head><meta http-equiv="Content-Type" content="text/html; charset=utf-8"><title>ActiveMQ in Spring boot using JMSTemplate</title><style>
      * {
        font-family: Georgia, Cambria, "Times New Roman", Times, serif;
      }
      html, body {
        margin: 0;
        padding: 0;
      }
      h1 {
        font-size: 50px;
        margin-bottom: 17px;
        color: #333;
      }
      h2 {
        font-size: 24px;
        line-height: 1.6;
        margin: 30px 0 0 0;
        margin-bottom: 18px;
        margin-top: 33px;
        color: #333;
      }
      h3 {
        font-size: 30px;
        margin: 10px 0 20px 0;
        color: #333;
      }
      header {
        width: 640px;
        margin: auto;
      }
      section {
        width: 640px;
        margin: auto;
      }
      section p {
        margin-bottom: 27px;
        font-size: 20px;
        line-height: 1.6;
        color: #333;
      }
      section img {
        max-width: 640px;
      }
      footer {
        padding: 0 20px;
        margin: 50px 0;
        text-align: center;
        font-size: 12px;
      }
      .aspectRatioPlaceholder {
        max-width: auto !important;
        max-height: auto !important;
      }
      .aspectRatioPlaceholder-fill {
        padding-bottom: 0 !important;
      }
      header,
      section[data-field=subtitle],
      section[data-field=description] {
        display: none;
      }
      </style></head><body><article class="h-entry">
<header>
<h1 class="p-name">ActiveMQ in Spring boot using JMSTemplate</h1>
</header>
<section data-field="subtitle" class="p-summary">
Hey there, In this article let us know about ActiveMQ messaging queues for asynchronous service-to-service communication used in serverless…
</section>
<section data-field="body" class="e-content">
<section name="302b" class="section section--body section--first"><div class="section-divider"><hr class="section-divider"></div><div class="section-content"><div class="section-inner sectionLayout--insetColumn"><h3 name="720c" id="720c" class="graf graf--h3 graf--leading graf--title"><a href="https://medium.com/@ankithahjpgowda/activemq-using-jmstemplate-in-spring-boot-a5267e9ad80e?source=user_profile---------0----------------------------" data-href="https://medium.com/@ankithahjpgowda/activemq-using-jmstemplate-in-spring-boot-a5267e9ad80e?source=user_profile---------0----------------------------" class="markup--anchor markup--h3-anchor" rel="noopener" target="_blank">ActiveMQ in Spring boot</a> <a href="https://medium.com/@ankithahjpgowda/activemq-using-jmstemplate-in-spring-boot-a5267e9ad80e?source=user_profile---------0----------------------------" data-href="https://medium.com/@ankithahjpgowda/activemq-using-jmstemplate-in-spring-boot-a5267e9ad80e?source=user_profile---------0----------------------------" class="markup--anchor markup--h3-anchor" rel="noopener" target="_blank">using JMSTemplate</a></h3><figure name="3ae8" id="3ae8" class="graf graf--figure graf-after--h3"><img class="graf-image" data-image-id="0*GWbWkg8_UpLwyfc3" data-width="3000" data-height="3595" data-unsplash-photo-id="T7BgXyf7JNY" src="https://cdn-images-1.medium.com/max/800/0*GWbWkg8_UpLwyfc3"><figcaption class="imageCaption">Photo by <a href="https://unsplash.com/@bryanhanson?utm_source=medium&amp;utm_medium=referral" data-href="https://unsplash.com/@bryanhanson?utm_source=medium&amp;utm_medium=referral" class="markup--anchor markup--figure-anchor" rel="photo-creator noopener" target="_blank">Bryan Hanson</a> on <a href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" data-href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" class="markup--anchor markup--figure-anchor" rel="photo-source noopener" target="_blank">Unsplash</a></figcaption></figure><p name="d56b" id="d56b" class="graf graf--p graf-after--figure">Hey there, In this article let us know about ActiveMQ messaging queues for asynchronous service-to-service communication used in serverless and microservices architectures.</p><p name="c6fe" id="c6fe" class="graf graf--p graf-after--p">As the name conveys, a queue gets and removes data in <strong class="markup--strong markup--p-strong">F</strong>irst <strong class="markup--strong markup--p-strong">I</strong>n <strong class="markup--strong markup--p-strong">F</strong>irst <strong class="markup--strong markup--p-strong">O</strong>ut order. There are many types of message queues available like — IBM MQ, ActiveMQ, RabbitMQ etc.</p><p name="9912" id="9912" class="graf graf--p graf-after--p graf--trailing">In Spring, there are in-build templates available for this purpose. If you are using ActiveMQ, we can use JMSTemplate. Let’s look at how it works.</p></div></div></section><section name="ee19" class="section section--body"><div class="section-divider"><hr class="section-divider"></div><div class="section-content"><div class="section-inner sectionLayout--insetColumn"><p name="c30f" id="c30f" class="graf graf--p graf--leading">In some cases, we may want to share the message to a single application or a group of applications. There comes the concept of — Queues and Topics.</p><p name="9a83" id="9a83" class="graf graf--p graf-after--p"><strong class="markup--strong markup--p-strong">Queue: </strong>Point-to-Point communication</p><p name="9f8c" id="9f8c" class="graf graf--p graf-after--p">The message will be held by container until it get consumed. There will be a single producer and single consumer.</p><p name="5cf5" id="5cf5" class="graf graf--p graf-after--p"><strong class="markup--strong markup--p-strong">Topic: </strong>Publisher-Subscriber communication.</p><p name="ab13" id="ab13" class="graf graf--p graf-after--p graf--trailing">The message will be placed by a producer. Here the consumers can be more than one. So, the message will be present in container till its read by all consumers.</p></div></div></section><section name="3cea" class="section section--body section--last"><div class="section-divider"><hr class="section-divider"></div><div class="section-content"><div class="section-inner sectionLayout--insetColumn"><p name="f123" id="f123" class="graf graf--p graf--leading">We need to have the ActiveMQ up and running in a machine. You can download and setup ActiveMQ <a href="https://activemq.apache.org/components/classic/download/" data-href="https://activemq.apache.org/components/classic/download/" class="markup--anchor markup--p-anchor" rel="noopener ugc nofollow noopener noopener" target="_blank">here</a>.</p><p name="f2b2" id="f2b2" class="graf graf--p graf-after--p">We need below dependency in our pom.xml file:</p><pre name="ade0" id="ade0" class="graf graf--pre graf-after--p">&lt;dependency&gt;<br>    &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;<br>    &lt;artifactId&gt;spring-boot-starter-activemq&lt;/artifactId&gt;<br>&lt;/dependency&gt;</pre><p name="8bca" id="8bca" class="graf graf--p graf-after--pre">By default, ActiveMQ will run in port 61616 and we need to specify these connection details in <code class="markup--code markup--p-code">application.properties</code> or<code class="markup--code markup--p-code"> application.yaml</code> file:</p><pre name="9c4c" id="9c4c" class="graf graf--pre graf-after--p">spring.activemq.broker-url=tcp://localhost:61616<br>spring.activemq.user=admin<br>spring.activemq.password=admin</pre><p name="610c" id="610c" class="graf graf--p graf-after--pre">In Configuration class, we need to create a bean of JMSTemplate as below referring environment variables from properties file.</p><figure name="82b2" id="82b2" class="graf graf--figure graf--iframe graf-after--p"><script src="https://gist.github.com/oldfr/60fff1311d55c520fca23909db8afeee.js"></script></figure><p name="d414" id="d414" class="graf graf--p graf-after--figure">In above code snippet, we need some beans to be created for customising the ActiveMQ behaviour:</p><ul class="postList"><li name="cd85" id="cd85" class="graf graf--li graf-after--p"><strong class="markup--strong markup--li-strong">ActiveMQConnectionFactory</strong> bean: It is required to establish connection to ActiveMQ. Refer additional options at <a href="http://activemq.apache.org/maven/apidocs/org/apache/activemq/ActiveMQConnectionFactory.html" data-href="http://activemq.apache.org/maven/apidocs/org/apache/activemq/ActiveMQConnectionFactory.html" class="markup--anchor markup--li-anchor" rel="noopener ugc nofollow noopener noopener" target="_blank">Apache ActiveMQ documentation</a></li><li name="0672" id="0672" class="graf graf--li graf-after--li"><strong class="markup--strong markup--li-strong">MessageConverter </strong>bean: It is<strong class="markup--strong markup--li-strong"> </strong>used to specify the converter between Java objects and JMS messages. Here, we are converting the message to TextMessage.</li><li name="83a2" id="83a2" class="graf graf--li graf-after--li"><strong class="markup--strong markup--li-strong">DynamicDestinationResolver </strong>bean : It is needed when a same application is having both queues and topics. In JMSTemplate we have single method <em class="markup--em markup--li-em">send()</em> for both queues and topics. It will be decided based on value of flag <code class="markup--code markup--li-code">pubSubDomain</code> at runtime. It could be done by overriding default implementation of <code class="markup--code markup--li-code"><em class="markup--em markup--li-em">resolveDestinationName()</em></code> in<em class="markup--em markup--li-em"> </em><code class="markup--code markup--li-code"><em class="markup--em markup--li-em">DynamicDestinationResolver</em></code> class.</li><li name="7f49" id="7f49" class="graf graf--li graf-after--li"><strong class="markup--strong markup--li-strong">JMSTemplate </strong>bean: Needed to perform all ActiveMQ related operations. The <code class="markup--code markup--li-code">deliveryMode</code> could be <code class="markup--code markup--li-code"><em class="markup--em markup--li-em">DeliveryMode.PERSISTENT</em></code> (messages will survive a broker restart) or <code class="markup--code markup--li-code"><em class="markup--em markup--li-em">DeliveryMode.NON_PERSISTENT</em></code><em class="markup--em markup--li-em">(</em>will lose all in-transit messages on failure<em class="markup--em markup--li-em">). </em>By default the deliveryMode is PERSISTENT.</li></ul><blockquote name="64e0" id="64e0" class="graf graf--blockquote graf-after--li"><strong class="markup--strong markup--blockquote-strong"><em class="markup--em markup--blockquote-em">Note: </em></strong><em class="markup--em markup--blockquote-em">KahaDB is the the default storage mechanism since </em><strong class="markup--strong markup--blockquote-strong"><em class="markup--em markup--blockquote-em">ActiveMQ 5.4</em></strong></blockquote><p name="874c" id="874c" class="graf graf--p graf-after--blockquote"><strong class="markup--strong markup--p-strong">Sending messages:</strong></p><p name="39a6" id="39a6" class="graf graf--p graf-after--p">All these thing are required for configuring the ActiveMQ in a Spring application. To place messages into messaging queue:</p><figure name="f377" id="f377" class="graf graf--figure graf--iframe graf-after--p"><script src="https://gist.github.com/oldfr/7f69b3ef98f671c6726eb6416a0e7a74.js"></script></figure><p name="734f" id="734f" class="graf graf--p graf-after--figure">The above code snippet is having two methods one for sending messages into queue and another to a topic. Both are having same implementation and calling the same <em class="markup--em markup--p-em">send() </em>method of JMSTemplate as discussed before. We can optimise the above code a bit with common method for both queue and topic.</p><p name="f728" id="f728" class="graf graf--p graf-after--p"><strong class="markup--strong markup--p-strong">Receiving messages:</strong></p><p name="9f67" id="9f67" class="graf graf--p graf-after--p">In Spring we have <code class="markup--code markup--p-code">@JmsListener</code> annotation that could be applied on method level which acts as receiver of message from the destination specified in this annotation.</p><p name="4202" id="4202" class="graf graf--p graf-after--p">We can forward the message to next destination using <code class="markup--code markup--p-code">@SendTo</code> annotation on listener method.</p><blockquote name="d82a" id="d82a" class="graf graf--blockquote graf-after--p"><strong class="markup--strong markup--blockquote-strong"><em class="markup--em markup--blockquote-em">Note:</em></strong><em class="markup--em markup--blockquote-em"> To forward a message to next container, we need to return the value from method annotated as listener.</em></blockquote><figure name="67bb" id="67bb" class="graf graf--figure graf--iframe graf-after--blockquote"><script src="https://gist.github.com/oldfr/5c309ab1dc3ecd766f32998407f25a3c.js"></script></figure><p name="ed21" id="ed21" class="graf graf--p graf-after--figure">In above code snippet, in <code class="markup--code markup--p-code">receiveAndForwardMessageFromQueue</code> function we are receiving a message from queue <em class="markup--em markup--p-em">myQueue </em>and forwarding it to another queue<em class="markup--em markup--p-em"> myQueue2.</em></p><p name="1417" id="1417" class="graf graf--p graf-after--p">In other two functions we are receiving the data from topic <em class="markup--em markup--p-em">myTopic.</em> Thus, we are creating 2 consumers for single topic <em class="markup--em markup--p-em">myTopic. </em>Here also, we can optionally forward the message received.</p><blockquote name="d6b4" id="d6b4" class="graf graf--blockquote graf-after--p"><strong class="markup--strong markup--blockquote-strong"><em class="markup--em markup--blockquote-em">Note: </em></strong><em class="markup--em markup--blockquote-em">We can forward message from a queue to another queue only. But in case of topic, we can forward to a queue or another topic.</em></blockquote><p name="a08f" id="a08f" class="graf graf--p graf-after--blockquote">You can always explore more about ActiveMQ in <a href="https://activemq.apache.org/components/classic/documentation" data-href="https://activemq.apache.org/components/classic/documentation" class="markup--anchor markup--p-anchor" rel="noopener ugc nofollow noopener noopener noopener" target="_blank">official documentation</a>.</p><p name="5493" id="5493" class="graf graf--p graf-after--p">Thank you for reading. Happy exploring!!!</p><p name="192d" id="192d" class="graf graf--p graf-after--p graf--trailing">The complete code can be found on GitHub <a href="https://github.com/oldfr/ActiveMQOverview" data-href="https://github.com/oldfr/ActiveMQOverview" class="markup--anchor markup--p-anchor" rel="noopener" target="_blank">here</a></p></div></div></section>
</section>
<footer><p>By <a href="https://medium.com/@ankithahjpgowda" class="p-author h-card">Ankitha Gowda</a> on <a href="https://medium.com/p/710b168d8fd3"><time class="dt-published" datetime="2021-10-15T07:02:58.232Z">October 15, 2021</time></a>.</p><p><a href="https://medium.com/@ankithahjpgowda/activemq-using-jmstemplate-in-spring-boot-710b168d8fd3" class="p-canonical">Canonical link</a></p><p>Exported from <a href="https://medium.com">Medium</a> on November 9, 2025.</p></footer></article></body></html>